<h1>12章 日時操作</h1>

<p>この章では日時操作について学習します。</p>

<h2>datetimeモジュール</h2>

<p>datetimeモジュールは日付や時間を操作するためのモジュールです。
まずは現在日時を取得してみましょう。nowメソッドを使用します。</p>

<pre><code class="python">from datetime import datetime

now = datetime.now()

print(now)   # 2018-12-01 12:47:30.639691
</code></pre>

<h3>指定日時の作成</h3>

<p>指定した日時のdatetimeインスタンスを生成してみましょう。
コンストラクタに日時分秒を指定することで生成します。</p>

<pre><code class="python">from datetime import datetime

d1 = datetime(2018, 12, 2)
d2 = datetime(2018, 12, 2, 1, 2, 3)

print(d1)  # 2018-12-02 00:00:00
print(d2)  # 2018-12-02 01:02:03
</code></pre>

<h3>曜日の取得</h3>

<p>datetimeインスタンスから曜日を取得することができます。
weekdayメソッドを使用します。</p>

<pre><code class="python">from datetime import datetime

d = datetime(2018, 12, 2)
w = d.weekday()

print(w)  # 6
</code></pre>

<p>曜日は数値で返ってきます。数値と曜日は以下のように対応しています。</p>

<table>
<thead>
<tr>
<th>数値</th>
<th>曜日</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>月曜日</td>
</tr>
<tr>
<td>1</td>
<td>火曜日</td>
</tr>
<tr>
<td>2</td>
<td>水曜日</td>
</tr>
<tr>
<td>3</td>
<td>木曜日</td>
</tr>
<tr>
<td>4</td>
<td>金曜日</td>
</tr>
<tr>
<td>5</td>
<td>土曜日</td>
</tr>
<tr>
<td>6</td>
<td>日曜日</td>
</tr>
</tbody>
</table>


<div style="page-break-before:always"></div>


<h3>日時を文字列に変換</h3>

<p>日時を指定フォーマットの文字列に変換することができます。
strftimeメソッドを使用します。</p>

<pre><code class="python">from datetime import datetime

d = datetime(2018, 12, 2)
date_string = d.strftime("%Y/%m/%d")

print(date_string)  # 2018/12/02
</code></pre>

<p>フォーマットの記号の詳細は公式ドキュメントを参照してください。<br/>
https://docs.python.org/3.7/library/datetime.html#strftime-and-strptime-behavior</p>

<h3>文字列を日時に変換</h3>

<p>反対に文字列からdatetimeインスタンスを生成することができます。
strptimeメソッドを使用します。</p>

<pre><code class="python">from datetime import datetime

d = datetime.strptime("2018/12/2", "%Y/%m/%d")

print(d)  # 2018-12-02 00:00:00
</code></pre>

<h3>timedeltaクラス</h3>

<p>日付の加減算を行うにはtimedeltaクラスを使用します。</p>

<pre><code class="python">from datetime import datetime, timedelta

d = datetime.now()
oneday = timedelta(days = 1)
yesterday = d - oneday

print(yesterday)  # 2018-11-30 13:14:42.034219
</code></pre>

<h3>dateクラス</h3>

<p>日付までで時分秒の情報が必要ない場合はdateクラスを使用しましょう。</p>

<pre><code class="python">from datetime import date

d1 = date.today()
d2 = date(2018, 12, 2)

print(d1)
print(d2)
</code></pre>
