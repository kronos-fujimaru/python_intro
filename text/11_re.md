# 11章 正規表現
この章では正規表現について学習します。

## 正規表現とは
正規表現とは文字列の集合を一つの文字列で表現する方法です。多くの場合、文字列の検索や入力チェック
置換などで利用されます。

## 主な正規表現
主な正規表現の特殊文字には以下のようなものがあります。

**[開始/終了]**

|記述方法|内容|
|-|-|
|^|文字列の先頭|
|$|文字列の末尾|

**[文字種]**

|記述方法|内容|
|-|-|
|.|改行以外の任意の文字|
|[...]|文字の集合を指定|
|[^...]|文字の集合の補集合要素|
|¥d|任意の10進数[0-9]|
|¥D|任意の非数字文字[^0-9]|
|¥w|任意の英数文字および下線[a-zA-Z0-9_]|
|¥W|任意の非英数文字[^a-zA-Z0-9_]|
|¥s|任意の空白文字|
|¥S|任意の非空白文字|

**[繰り返し回数]**

|記述方法|内容|
|-|-|
|{m}|m回の繰り返し|
|{m, n}|m回からn回の繰り返し|
|+|直前にある文字が1回以上繰り返される|
|*|直前にある文字が0回以上繰り返される|

<div style="page-break-before:always"></div>

## 検索
正規表現を使用して検索を行うには、reモジュールのsearch関数を使用します。
正規表現にマッチした場合は正規表現オブジェクトを返し、マッチしない場合はNoneを返します。

```python
import re

'''
^$d : 数値で始まり
* : 0回以上繰り返し
$ : それが最後の文字
'''
print(re.search("\d+", "1234")) # <re.Match object; span=(0, 4), match='1234'>
print(re.search("\d+", "1234").group()) # 1234
print(re.search("\d+", "abc"))  # None
print(re.search("\d+", "123abc")) # <re.Match object; span=(0, 3), match='123'>
print(re.search("\d+", "ab123cd")) # <re.Match object; span=(2, 5), match='123'>
```

## 入力チェック
正規表現を使用して入力チェックを行うには、reモジュールのmatch関数を使用します。
match関数はsearch関数とよく似ています。search関数は文字列中のどこか一致するものを探すのに対し、match関数は文字列の先頭から正規表現と一致しているか判定します。

```python
import re

print(re.match("\d+", "1234")) # <re.Match object; span=(0, 4), match='1234'>
print(re.match("\d+", "123abc"))  # <re.Match object; span=(0, 3), match='123'>
print(re.match("\d+", "ab123cd")) # None
```

入力チェックにはmatch関数のほうがふさわしいでしょう。

## 置換
正規表現を使用して置換を行うには、reモジュールのsub関数を使用します。
正規表現にマッチした箇所を指定文字列に置き換えます。

```python
import re

print(re.sub("\d{2}", "XX", "ab123c45de"))  # abXX3cXXde
```
